{% load static %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
		<meta name="description" content="Navicus 360">
		<meta name="author" content="Spruko Technologies Private Limited">
		<meta name="keywords" content="admin, admin dashboard, admin dashboard template, bootstrap 5 admin, bootstrap 5 dashboard template, bootstrap admin template, bootstrap django, dashboard, dashboard template, django admin dashboard, django admin template, django bootstrap admin template, django bootstrap template, django dashboard, django template">
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

		<!-- Chart js charts -->
		<!-- jQuery library -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<!-- Latest compiled JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
		
		<!-- Title -->
		<title> Navicus 360</title>

		<!-- Styles -->
		{% block styles %}{% endblock %}
		{% include 'components/layouts/styles.html'%}

	</head>

	<body class="main-body leftmenu ltr light-theme dark-menu">

		{% include 'components/layouts/switcher.html'%}

		<!-- Loader -->
		<div id="global-loader">
			<img src="{% static 'assets/img/loader.svg'%}" class="loader-img" alt="Loader">
		</div>
		<!-- End Loader -->

		<!-- Page -->
		<div class="page">

			<!--App-header-->
			{% include 'components/layouts/app-header.html'%}

			<!--App-sidebar-->
			{% include 'components/layouts/app-sidebar-client.html'%}

			<!-- Main Content-->
			<div class="main-content side-content pt-0">
				<div class="main-container container-fluid">
					<div class="inner-body">

						{% block content %} {% endblock %}

					</div>
				</div>
			</div>
			<!-- End Main Content-->

			<!--Sidebar-right-->
			{% include 'components/layouts/sidebar-right.html'%}

			<!--Footer-->
			<!-- {% include 'components/layouts/footer.html'%} -->
			{% comment %}
			<!-- {% include 'layouts/footer.html'%} -->
			{% endcomment %}
			<!--Modal-->
			{% include 'components/layouts/modal.html'%}
			{% block modal %}{% endblock %}

		</div>
		<!-- Chart js -->
		<script src="{% static 'assets/chart.js/Chart.js' %}"></script>
		<script src="{% static 'assets/chart.js/Chart.min.js' %}"></script>
		<!--Scripts-->
		{% include 'components/layouts/scripts.html'%}
		{% block scripts %}{% endblock %}

		<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

		<script>
			var endpoint = '/api';
		
			$.ajax({
			method: "GET",
			url: endpoint,
			success: function(data) {
				drawLineGraph(data, 'myChartline');
				drawBarGraph(data, 'myChartBar');
				drawPieChart(data, 'myPieChart');
				console.log("drawing");
			},
			error: function(error_data) {
				console.log(error_data);
			}
			})
		
		
			function drawLineGraph(data, id) {
			var labels = data.labels;
			var chartLabel = data.chartLabel;
			var chartdata = data.chartdata;
			var ctx = document.getElementById(id).getContext('2d');
			var chart = new Chart(ctx, {
				// The type of chart we want to create
				type: 'line',
		
				// The data for our dataset
				data: {
				labels: labels,
				datasets: [{
					label: chartLabel,
					backgroundColor: 'rgb(255, 100, 200)',
					borderColor: 'rgb(55, 99, 132)',
					data: chartdata,
				}]
				},
		
				// Configuration options go here
				options: {
				scales: {
					xAxes: [{
					display: true
					}],
					yAxes: [{
					ticks: {
						beginAtZero: true
					}
					}]
				}
				}
		
			});
			}
		
		  //BarGraph
			function drawBarGraph(data, id) {
			var labels = data.labels;
			var chartLabel = data.chartLabel;
			var chartdata = data.chartdata;
			var ctx = document.getElementById(id).getContext('2d');
			var myChart = new Chart(ctx, {
				type: 'bar',
				data: {
				labels: labels,
				datasets: [{
					label: chartLabel,
					data: chartdata,
					backgroundColor: [
					'rgba(255, 99, 132, 0.2)',
					'rgba(54, 162, 235, 0.2)',
					'rgba(255, 206, 86, 0.2)',
					'rgba(75, 192, 192, 0.2)',
					'rgba(153, 102, 255, 0.2)',
					'rgba(255, 159, 64, 0.2)'
					],
					borderColor: [
					'rgba(255, 99, 132, 1)',
					'rgba(54, 162, 235, 1)',
					'rgba(255, 206, 86, 1)',
					'rgba(75, 192, 192, 1)',
					'rgba(153, 102, 255, 1)',
					'rgba(255, 159, 64, 1)'
					],
					borderWidth: 0.1
				}]
				},
				options: {
				scales: {
					yAxes: [{
					ticks: {
						beginAtZero: true
					}
					}]
				}
				}
			});
			}
		  //PieChart
			function drawPieChart(data, id) {
			var labels = data.labels;
			var chartLabel = data.chartLabel;
			var chartdata = data.chartdata;
			var ctx = document.getElementById(id).getContext('2d');
			var myChart = new Chart(ctx, {
				type: 'pie',
				data: {
				labels: labels,
				datasets: [{
					label: chartLabel,
					data: chartdata,
					backgroundColor: [
					'rgba(255, 99, 132, 0.2)',
					'rgba(54, 162, 235, 0.2)',
					'rgba(255, 206, 86, 0.2)',
					'rgba(75, 192, 192, 0.2)',
					'rgba(153, 102, 255, 0.2)',
					'rgba(255, 159, 64, 0.2)'
					],
					borderColor: [
					'rgba(255, 99, 132, 1)',
					'rgba(54, 162, 235, 1)',
					'rgba(255, 206, 86, 1)',
					'rgba(75, 192, 192, 1)',
					'rgba(153, 102, 255, 1)',
					'rgba(255, 159, 64, 1)'
					],
					borderWidth: 0.1
				}]
				},
				options: {
				scales: {
					//yAxes: [{
					//ticks: {
						//beginAtZero: true
					//}
					//}]
				}
				}
			});
			}
		</script>
		
	</body>

</html>
